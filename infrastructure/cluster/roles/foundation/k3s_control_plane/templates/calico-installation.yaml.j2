---
# Calico Installation for K3s
# This file is generated by Ansible - DO NOT EDIT MANUALLY
apiVersion: operator.tigera.io/v1
kind: Installation
metadata:
  name: default
spec:
  # Configure Calico for K3s environment
  kubernetesProvider: k3s
  
  # Network configuration
  calicoNetwork:
    # Configure IP pools
    ipPools:
    - blockSize: 26
      cidr: {{ calico_ipv4pool_cidr }}
      encapsulation: VXLANCrossSubnet
      natOutgoing: Enabled
      nodeSelector: all()
    
    # Container settings
    containerIPForwarding: Enabled
    
    # Host ports configuration
    hostPorts: Enabled

  # Node configuration  
  nodeAddressAutodetection:
    # Auto-detect the correct interface
    firstFound: true

  # Flexvolume path for K3s
  flexVolumePath: /var/lib/kubelet/volumeplugins

  # Registry configuration
  registry: docker.io

---
# Calico API Server (optional but recommended for NetworkPolicy)
apiVersion: operator.tigera.io/v1
kind: APIServer
metadata:
  name: default
spec: {}